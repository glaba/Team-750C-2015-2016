\hypertarget{lcddiag_8c_source}{}\subsection{lcddiag.\+c}
\label{lcddiag_8c_source}\index{src/lcddiag.\+c@{src/lcddiag.\+c}}

\begin{DoxyCode}
00001 
00024 \textcolor{preprocessor}{#include "\hyperlink{main_8h}{main.h}"}
00025 
\hypertarget{lcddiag_8c_source.tex_l00031}{}\hyperlink{lcddiag_8h_a2a17fd7ddf1721b3a9d9b2a3d728c365}{00031} TaskHandle \hyperlink{lcddiag_8c_a2a17fd7ddf1721b3a9d9b2a3d728c365}{lcdDiagTask} = NULL;
00032 
\hypertarget{lcddiag_8c_source.tex_l00036}{}\hyperlink{lcddiag_8c_a8ba67e368b4d0422ad0c1fe6695040ac}{00036} \textcolor{keywordtype}{bool} \hyperlink{lcddiag_8c_a8ba67e368b4d0422ad0c1fe6695040ac}{backlight} = \textcolor{keyword}{true};
00037 
\hypertarget{lcddiag_8c_source.tex_l00042}{}\hyperlink{lcddiag_8h_a0f0b335cd078d025d6fb720eb3bf6437}{00042} \textcolor{keywordtype}{bool} \hyperlink{lcddiag_8c_a0f0b335cd078d025d6fb720eb3bf6437}{disableOpControl} = \textcolor{keyword}{false};
00043 
\hypertarget{lcddiag_8c_source.tex_l00049}{}\hyperlink{lcddiag_8h_a7c12b01a5e5a665d9d799e862dab6350}{00049} \hyperlink{struct_motor_group}{MotorGroup} *\hyperlink{lcddiag_8c_a7c12b01a5e5a665d9d799e862dab6350}{groups};
00050 
\hypertarget{lcddiag_8c_source.tex_l00055}{}\hyperlink{lcddiag_8h_a205f1cedec1664555276e0a71a1c87d8}{00055} \textcolor{keywordtype}{int} \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups};
00056 
\hypertarget{lcddiag_8c_source.tex_l00060}{}\hyperlink{lcddiag_8h_ab5b8edfc6a94520add858274b3fac974}{00060} \textcolor{keywordtype}{char} \hyperlink{lcddiag_8c_ab5b8edfc6a94520add858274b3fac974}{menuChoices}[\hyperlink{lcddiag_8h_af08e03edfc50fa6a3af2555f9cce6e6c}{LCD\_MENU\_COUNT}][\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] =
       \{
00061     \textcolor{stringliteral}{"Motor Test"},
00062     \textcolor{stringliteral}{"Motor Group Mgmt"},
00063     \textcolor{stringliteral}{"Battery Info"},
00064     \textcolor{stringliteral}{"Connection Info"},
00065     \textcolor{stringliteral}{"Robot Info"},
00066     \textcolor{stringliteral}{"Autonomous Info"},
00067     \textcolor{stringliteral}{"Toggle Backlight"},
00068     \textcolor{stringliteral}{"Screensaver"},
00069     \textcolor{stringliteral}{"Credits"}
00070 \};
00071 
\hypertarget{lcddiag_8c_source.tex_l00081}{}\hyperlink{lcddiag_8h_a17fe3ffc769a6d02c5226b3bfb79f28f}{00081} \textcolor{keywordtype}{char}* \hyperlink{lcddiag_8c_a17fe3ffc769a6d02c5226b3bfb79f28f}{typeString}(\textcolor{keywordtype}{char} *dest)\{
00082     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00083     \textcolor{keywordtype}{int} val;
00084     memset(dest, 0, \textcolor{keyword}{sizeof}(*dest));
00085     \textcolor{keywordtype}{int} i = 0;
00086     \textcolor{keyword}{typedef} \textcolor{keyword}{enum} Case \{
00087         UPPER, LOWER, NUMBER
00088     \} Case;
00089     Case c = UPPER;
00090     \textcolor{keywordtype}{int} mult = 28;
00091     \textcolor{keywordtype}{int} spacecode = 26;
00092     \textcolor{keywordtype}{int} endcode = 27;
00093     \textcolor{keywordflow}{do} \{
00094         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00095         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00096         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00097 
00098         \textcolor{keywordflow}{switch}(c)\{
00099             \textcolor{keywordflow}{case} UPPER:
00100             \textcolor{keywordflow}{case} LOWER: mult = 28; spacecode = 26; endcode = 27; \textcolor{keywordflow}{break};
00101             \textcolor{keywordflow}{case} NUMBER: mult = 12; spacecode = 10; endcode = 11; \textcolor{keywordflow}{break};
00102         \}
00103         val = (float) ((\textcolor{keywordtype}{float}) analogRead(\hyperlink{autonrecorder_8h_a2490cda7a399f481333af2e5589b74a9}{AUTON\_POT})/(float) 
      \hyperlink{autonrecorder_8h_a01989d89b8bed150d0aacdaef5ccabd3}{AUTON\_POT\_HIGH}) * mult;
00104         \textcolor{keywordflow}{if}(val > endcode)\{
00105             val = endcode;
00106         \}
00107         \textcolor{keywordflow}{if}(val == spacecode)\{
00108             dest[i] = \textcolor{charliteral}{' '};
00109         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == endcode) \{
00110             dest[i] = \textcolor{charliteral}{'~'};
00111         \} \textcolor{keywordflow}{else} \{
00112             \textcolor{keywordflow}{switch}(c)\{
00113                 \textcolor{keywordflow}{case} UPPER: dest[i] = val + \textcolor{charliteral}{'A'}; \textcolor{keywordflow}{break};
00114                 \textcolor{keywordflow}{case} LOWER: dest[i] = val + \textcolor{charliteral}{'a'}; \textcolor{keywordflow}{break};
00115                 \textcolor{keywordflow}{case} NUMBER: dest[i] = val + \textcolor{charliteral}{'0'}; \textcolor{keywordflow}{break};
00116             \}
00117         \}
00118 
00119         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(dest))/2;
00120         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00121         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00122             strcat(str, \textcolor{stringliteral}{" "});
00123         \}
00124         strcat(str, dest);
00125         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00126             strcat(str, \textcolor{stringliteral}{" "});
00127         \}
00128 
00129         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00130 
00131         \textcolor{keywordflow}{if}(i > 0)\{
00132             \textcolor{keywordflow}{if}(c == UPPER)\{
00133                 lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"DEL    SEL   abc"});
00134             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(c == LOWER) \{
00135                 lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"DEL    SEL   123"});
00136             \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{//NUMBER}
00137                 lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"DEL    SEL   ABC"});
00138             \}
00139         \} \textcolor{keywordflow}{else} \{
00140             \textcolor{keywordflow}{if}(c == UPPER)\{
00141                 lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"|      SEL   abc"});
00142             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(c == LOWER) \{
00143                 lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"|      SEL   123"});
00144             \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{//NUMBER}
00145                 lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"|      SEL   ABC"});
00146             \}
00147         \}
00148 
00149         \textcolor{keywordflow}{if}((centerPressed) && val != endcode)\{
00150             i++;
00151         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && i > 0)\{
00152             dest[i] = 0;
00153             i--;
00154         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(rightPressed) \{
00155             \textcolor{keywordflow}{switch}(c)\{
00156                 \textcolor{keywordflow}{case} UPPER: c = LOWER; \textcolor{keywordflow}{break};
00157                 \textcolor{keywordflow}{case} LOWER: c = NUMBER; \textcolor{keywordflow}{break};
00158                 \textcolor{keywordflow}{case} NUMBER: c = UPPER; \textcolor{keywordflow}{break};
00159             \}
00160         \}
00161 
00162         done = ((centerPressed && val == endcode) || i == \hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH});
00163         delay(20);
00164     \} \textcolor{keywordflow}{while}(!done);
00165     dest[i] = 0;
00166     \textcolor{keywordflow}{return} dest;
00167 \}
00168 
\hypertarget{lcddiag_8c_source.tex_l00173}{}\hyperlink{lcddiag_8c_a816c6a9d20d80fcfcc4b684df11531b5}{00173} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a816c6a9d20d80fcfcc4b684df11531b5}{saveGroups}()\{
00174     FILE* group = fopen(\textcolor{stringliteral}{"grp"}, \textcolor{stringliteral}{"w"});
00175     taskPrioritySet(NULL, TASK\_PRIORITY\_HIGHEST-1);
00176     lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, \textcolor{stringliteral}{"Saving groups..."});
00177     lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{""});
00178     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}; i++)\{
00179         fwrite(groups[i].motor, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{bool}), \textcolor{keyword}{sizeof}(groups[i].motor) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{bool}), group);
00180         fwrite(\textcolor{stringliteral}{"\(\backslash\)n"}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"\(\backslash\)n"}) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), group);
00181         fwrite(groups[i].name, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), \textcolor{keyword}{sizeof}(groups[i].name) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), group);
00182         \textcolor{keywordflow}{if}(i == numgroups-1)\{
00183             fwrite(\textcolor{stringliteral}{"\(\backslash\)t"}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"\(\backslash\)t"}) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), group);
00184         \} \textcolor{keywordflow}{else} \{
00185             fwrite(\textcolor{stringliteral}{"\(\backslash\)n"}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"\(\backslash\)n"}) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), group);
00186         \}
00187     \}
00188     taskPrioritySet(NULL, TASK\_PRIORITY\_DEFAULT);
00189     lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, \textcolor{stringliteral}{"Saved groups!"});
00190     lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{""});
00191     delay(1000);
00192 \}
00193 
\hypertarget{lcddiag_8c_source.tex_l00198}{}\hyperlink{lcddiag_8c_a98f03692fe38505e9b0231122b976c0e}{00198} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a98f03692fe38505e9b0231122b976c0e}{loadGroups}()\{
00199     FILE* group = fopen(\textcolor{stringliteral}{"grp"}, \textcolor{stringliteral}{"r"});
00200     taskPrioritySet(NULL, TASK\_PRIORITY\_HIGHEST-1);
00201     lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, \textcolor{stringliteral}{"Loading groups..."});
00202     lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{""});
00203     \textcolor{keywordflow}{if}(groups != NULL)\{
00204         free(groups);
00205     \}
00206     groups = NULL;
00207     \textcolor{keywordtype}{int} i = 0;
00208     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00209     \textcolor{keywordflow}{while}(!done)\{
00210         groups = (\hyperlink{struct_motor_group}{MotorGroup} *) realloc(groups, \textcolor{keyword}{sizeof}(\hyperlink{struct_motor_group}{MotorGroup})*(i+1));
00211         fread(groups[i].motor, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{bool}), \textcolor{keyword}{sizeof}(groups[i].motor) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{bool}), group);
00212         fgetc(group);
00213         fread(groups[i].name, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), \textcolor{keyword}{sizeof}(groups[i].name) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), group);
00214         \textcolor{keywordflow}{if}(fgetc(group) == \textcolor{charliteral}{'\(\backslash\)t'})\{
00215             done = \textcolor{keyword}{true};
00216         \}
00217         i++;
00218     \}
00219     \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups} = i;
00220     taskPrioritySet(NULL, TASK\_PRIORITY\_DEFAULT);
00221     lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, \textcolor{stringliteral}{"Loaded groups!"});
00222     lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{""});
00223     delay(1000);
00224 \}
00225 
\hypertarget{lcddiag_8c_source.tex_l00230}{}\hyperlink{lcddiag_8h_ad290df3e273598f9f10fe34c257e4084}{00230} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_ad290df3e273598f9f10fe34c257e4084}{initGroups}()\{
00231     FILE* group = fopen(\textcolor{stringliteral}{"grp"}, \textcolor{stringliteral}{"r"});
00232     \textcolor{keywordflow}{if}(group == NULL)\{
00233         \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups} = 6; \textcolor{comment}{//LDRIVE, RDRIVE, DRIVE, SHOOT, INTK, TRANS }
00234         groups = (\hyperlink{struct_motor_group}{MotorGroup}*) malloc(\textcolor{keyword}{sizeof}(\hyperlink{struct_motor_group}{MotorGroup}) * 
      \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups});
00235         \textcolor{keywordflow}{if}(groups == NULL)\{
00236             \textcolor{keywordflow}{return};
00237         \}
00238         memset(groups, 0, \textcolor{keyword}{sizeof}(*groups));
00239         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i<\hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}; i++)\{
00240             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = 0; j<=10; j++)\{
00241                 groups[i].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[j] = \textcolor{keyword}{false};
00242             \}
00243         \}
00244         groups[0].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a3e06fbce97caed16e0a0f27f544587af}{LEFT\_MOTOR\_TOP}] = \textcolor{keyword}{true};
00245         groups[0].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a43691a92e03fa5319b14f01193f47b9a}{LEFT\_MOTOR\_BOT}] = \textcolor{keyword}{true};
00246         strcpy(groups[0].name, \textcolor{stringliteral}{"Left Drive"});
00247 
00248         groups[1].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a306c5923dd0328c4bfc09255de9d124c}{RIGHT\_MOTOR\_TOP}] = \textcolor{keyword}{true};
00249         groups[1].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a85c904d091f71ba7fc53a446524b6c61}{RIGHT\_MOTOR\_BOT}] = \textcolor{keyword}{true};
00250         strcpy(groups[1].name, \textcolor{stringliteral}{"Right Drive"});
00251 
00252         groups[2].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a3e06fbce97caed16e0a0f27f544587af}{LEFT\_MOTOR\_TOP}] = \textcolor{keyword}{true};
00253         groups[2].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a43691a92e03fa5319b14f01193f47b9a}{LEFT\_MOTOR\_BOT}] = \textcolor{keyword}{true};
00254         groups[2].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a306c5923dd0328c4bfc09255de9d124c}{RIGHT\_MOTOR\_TOP}] = \textcolor{keyword}{true};
00255         groups[2].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a85c904d091f71ba7fc53a446524b6c61}{RIGHT\_MOTOR\_BOT}] = \textcolor{keyword}{true};
00256         strcpy(groups[2].name, \textcolor{stringliteral}{"Full Drive"});
00257 
00258         groups[3].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a4a9fed3366effbbb942b907c131ae8bd}{NAUTILUS\_SHOOTER\_MOTOR\_LEFT}] = \textcolor{keyword}{true};
00259         groups[3].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a3fa3054b1d74b733800c7b9252362334}{NAUTILUS\_SHOOTER\_MOTOR\_RIGHT}] = \textcolor{keyword}{true};
00260         groups[3].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a681ecbcdbf9007fc5ccf3d67cdcfb505}{NAUTILUS\_SHOOTER\_MOTOR\_CENTER}] = \textcolor{keyword}{true};
00261         strcpy(groups[3].name, \textcolor{stringliteral}{"Nautilus Shooter"});
00262 
00263         groups[4].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a8ac783dc4e09804d3b2f7e3b6bbecad7}{INTAKE\_ROLLER\_MOTOR}] = \textcolor{keyword}{true};
00264         strcpy(groups[4].name, \textcolor{stringliteral}{"Intake"});
00265 
00266         groups[5].\hyperlink{struct_motor_group_a05d10a69eb1ae279fab13f9a009d84be}{motor}[\hyperlink{motors_8h_a7d8ac8902b66bb442bb27f9899aef13e}{TRANSMISSION\_MOTOR}] = \textcolor{keyword}{true};
00267         strcpy(groups[5].name, \textcolor{stringliteral}{"Transmission"});
00268 
00269         \textcolor{comment}{//saveGroups();}
00270     \} \textcolor{keywordflow}{else} \{
00271         \textcolor{comment}{//loadGroups();}
00272     \}
00273 \}
00274 
\hypertarget{lcddiag_8c_source.tex_l00282}{}\hyperlink{lcddiag_8c_a465a6cd66cde04199ae9641acce59d52}{00282} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a465a6cd66cde04199ae9641acce59d52}{formatMenuNameCenter}(FILE* lcdport, \textcolor{keywordtype}{int} line, \textcolor{keywordtype}{int} index)\{
00283     \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(
      \hyperlink{lcddiag_8c_ab5b8edfc6a94520add858274b3fac974}{menuChoices}[index]))/2;
00284     \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00285     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00286         strcat(str, \textcolor{stringliteral}{" "});
00287     \}
00288     strcat(str, \hyperlink{lcddiag_8c_ab5b8edfc6a94520add858274b3fac974}{menuChoices}[index]);
00289     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00290         strcat(str, \textcolor{stringliteral}{" "});
00291     \}
00292     lcdSetText(lcdport, line, str);
00293 \}
00294 
\hypertarget{lcddiag_8c_source.tex_l00300}{}\hyperlink{lcddiag_8c_a1d2702d6508950416e4c927cc1ca18b3}{00300} \textcolor{keywordtype}{int} \hyperlink{lcddiag_8c_a1d2702d6508950416e4c927cc1ca18b3}{selectMenu}() \{
00301     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00302     \textcolor{keywordtype}{int} val = 0;
00303     \textcolor{keywordflow}{do} \{
00304         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00305         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00306         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00307 
00308         \textcolor{keywordflow}{if}(rightPressed && val != \hyperlink{lcddiag_8h_af08e03edfc50fa6a3af2555f9cce6e6c}{LCD\_MENU\_COUNT}-1) val++;
00309         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(rightPressed && val == \hyperlink{lcddiag_8h_af08e03edfc50fa6a3af2555f9cce6e6c}{LCD\_MENU\_COUNT}-1) val = 0;
00310         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != 0) val--;
00311         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val == 0) val = \hyperlink{lcddiag_8h_af08e03edfc50fa6a3af2555f9cce6e6c}{LCD\_MENU\_COUNT} - 1;
00312 
00313         \hyperlink{lcddiag_8c_a465a6cd66cde04199ae9641acce59d52}{formatMenuNameCenter}(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, val);
00314         \textcolor{keywordflow}{if}(val == 0)\{
00315             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     >"});
00316         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == \hyperlink{lcddiag_8h_af08e03edfc50fa6a3af2555f9cce6e6c}{LCD\_MENU\_COUNT}-1) \{
00317             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     >"});
00318         \} \textcolor{keywordflow}{else} \{
00319             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     >"});
00320         \}
00321         delay(20);
00322         done = centerPressed;
00323     \} \textcolor{keywordflow}{while}(!done);
00324     printf(\textcolor{stringliteral}{"Selected menu choice: %d\(\backslash\)n"}, val);
00325     \textcolor{keywordflow}{return} val;
00326 \}
00327 
\hypertarget{lcddiag_8c_source.tex_l00335}{}\hyperlink{lcddiag_8c_a26920e40538bd7b86a0453f2629991d0}{00335} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a26920e40538bd7b86a0453f2629991d0}{runScreensaver}(FILE *lcdport)\{
00336     \textcolor{keywordtype}{int} cycle = 0;
00337     \textcolor{keywordflow}{do} \{
00338         \textcolor{keywordflow}{if}(cycle == 0)\{
00339             \hyperlink{lcdmsg_8c_acc19fe50b302412c894538965e77cb8b}{screensaver}(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT});
00340         \}
00341         delay(20);
00342         cycle++;
00343         \textcolor{keywordflow}{if}(cycle==150)\{
00344             cycle=0;
00345         \}
00346     \} \textcolor{keywordflow}{while}(!\hyperlink{lcddiag_8h_a0592813f995bfeeadb9bee923833ed35}{lcdAnyButtonPressed}());
00347 \}
00348 
\hypertarget{lcddiag_8c_source.tex_l00354}{}\hyperlink{lcddiag_8c_a9a604d967527579e547780271290500f}{00354} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a9a604d967527579e547780271290500f}{runBattery}(FILE *lcdport)\{
00355     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00356     \textcolor{keywordtype}{int} val = \hyperlink{sensors_8h_aa48831e4de90908c1b37560e7aba2c5f}{BATT\_MAIN};
00357     \textcolor{keywordflow}{do} \{
00358         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00359         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00360         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00361 
00362         \textcolor{keywordflow}{if}(rightPressed && val != \hyperlink{sensors_8h_aaad063d8cfbd393cdc04bcaae68b48ef}{BATT\_PEXP}) val++;
00363         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(rightPressed && val == \hyperlink{sensors_8h_aaad063d8cfbd393cdc04bcaae68b48ef}{BATT\_PEXP}) val = \hyperlink{sensors_8h_aa48831e4de90908c1b37560e7aba2c5f}{BATT\_MAIN};
00364         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != \hyperlink{sensors_8h_aa48831e4de90908c1b37560e7aba2c5f}{BATT\_MAIN}) val--;
00365         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val == \hyperlink{sensors_8h_aa48831e4de90908c1b37560e7aba2c5f}{BATT\_MAIN}) val = \hyperlink{sensors_8h_aaad063d8cfbd393cdc04bcaae68b48ef}{BATT\_PEXP};
00366 
00367         \textcolor{keywordtype}{int} beforepoint = 0;
00368         \textcolor{keywordtype}{int} afterpoint = 0;
00369         \textcolor{keywordtype}{char} battdisp[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00370         \textcolor{keywordtype}{char} temp[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00371         memset(battdisp, 0, \textcolor{keyword}{sizeof}(battdisp));
00372         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00373 
00374         \textcolor{keywordflow}{switch}(val)\{
00375             \textcolor{keywordflow}{case} \hyperlink{sensors_8h_aa48831e4de90908c1b37560e7aba2c5f}{BATT\_MAIN}: beforepoint = powerLevelMain()/1000;
00376                             afterpoint = powerLevelMain()%1000;
00377                             strcat(battdisp, \textcolor{stringliteral}{"Mn Batt: "});
00378                             \textcolor{keywordflow}{break};
00379             \textcolor{keywordflow}{case} \hyperlink{sensors_8h_a5af8f9e877197004f0f5bf982a755146}{BATT\_BKUP}: beforepoint = powerLevelBackup()/1000;
00380                             afterpoint = powerLevelBackup()%1000;
00381                             strcat(battdisp, \textcolor{stringliteral}{"Bk Batt: "});
00382                             \textcolor{keywordflow}{break};
00383             \textcolor{keywordflow}{case} \hyperlink{sensors_8h_aaad063d8cfbd393cdc04bcaae68b48ef}{BATT\_PEXP}: beforepoint = \hyperlink{sensors_8h_af8de9fe9eba1282f34dce42deebffc93}{powerLevelExpander}()/1000;
00384                             afterpoint = \hyperlink{sensors_8h_af8de9fe9eba1282f34dce42deebffc93}{powerLevelExpander}()%1000;
00385                             strcat(battdisp, \textcolor{stringliteral}{"Ex Batt: "});
00386                             \textcolor{keywordflow}{break};
00387         \}
00388         sprintf(temp, \textcolor{stringliteral}{"%d.%d V"}, beforepoint, afterpoint);
00389         strcat(battdisp, temp);
00390 
00391         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(battdisp))/2;
00392         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00393         memset(str, 0, \textcolor{keyword}{sizeof}(str));
00394         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00395             strcat(str, \textcolor{stringliteral}{" "});
00396         \}
00397         strcat(str, battdisp);
00398         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00399             strcat(str, \textcolor{stringliteral}{" "});
00400         \}
00401         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00402 
00403         \textcolor{keywordflow}{if}(val == \hyperlink{sensors_8h_aa48831e4de90908c1b37560e7aba2c5f}{BATT\_MAIN})\{
00404             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"EX     ESC    BK"});
00405         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == \hyperlink{sensors_8h_aaad063d8cfbd393cdc04bcaae68b48ef}{BATT\_PEXP}) \{
00406             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"BK     ESC    MN"});
00407         \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{//BATT\_BKUP}
00408             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"MN     ESC    EX"});
00409         \}
00410         delay(20);
00411         done = centerPressed;
00412     \} \textcolor{keywordflow}{while}(!done);
00413 \}
00414 
\hypertarget{lcddiag_8c_source.tex_l00422}{}\hyperlink{lcddiag_8c_ae7425e4ec1454bd0054bd4e1db7ea686}{00422} \textcolor{keywordtype}{int} \hyperlink{lcddiag_8c_ae7425e4ec1454bd0054bd4e1db7ea686}{selectMotor}(FILE *lcdport)\{
00423     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00424     \textcolor{keywordtype}{int} val = 1;
00425     \textcolor{keywordflow}{do} \{
00426         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00427         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00428         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00429 
00430         \textcolor{keywordflow}{if}(rightPressed && val != 10) val++;
00431         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(rightPressed && val == 10) val = 0;
00432         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != 0) val--;
00433         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val == 0) val = 10;
00434 
00435         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00436         \textcolor{keywordflow}{if}(val != 0)\{
00437             \textcolor{keywordtype}{char} temp[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00438             memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00439             memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00440             strcpy(motorstr, \textcolor{stringliteral}{"Motor: "});
00441             sprintf(temp, \textcolor{stringliteral}{"%d"}, val);
00442             strcat(motorstr, temp);
00443         \} \textcolor{keywordflow}{else} \{
00444             strcpy(motorstr, \textcolor{stringliteral}{"Cancel"});
00445         \}
00446 
00447         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00448         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00449         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00450             strcat(str, \textcolor{stringliteral}{" "});
00451         \}
00452         strcat(str, motorstr);
00453         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00454             strcat(str, \textcolor{stringliteral}{" "});
00455         \}
00456 
00457         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00458 
00459         done = centerPressed;
00460         \textcolor{keywordflow}{if}(val == 0)\{
00461             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"10     SEL     1"});
00462         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == 1) \{
00463             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"ESC    SEL     2"});
00464         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == 10) \{
00465             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"9      SEL   ESC"});
00466         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (val == 9) \{
00467             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"8      SEL    10"});
00468         \} \textcolor{keywordflow}{else} \{
00469             \textcolor{keywordtype}{char} navstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00470             memset(navstr, 0, \textcolor{keyword}{sizeof}(navstr));
00471             sprintf(navstr, \textcolor{stringliteral}{"%c      SEL     %c"},(val-1) + \textcolor{charliteral}{'0'}, (val+1) + \textcolor{charliteral}{'0'});
00472             \textcolor{comment}{/*navstr[0] = (val-1) + '0';*/}
00473             \textcolor{comment}{/*strcat(navstr, "      SEL     ");*/}
00474             \textcolor{comment}{/*navstr[LCD\_MESSAGE\_MAX\_LENGTH] = (val+1) + '0';*/}
00475             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, navstr);
00476         \}
00477         delay(20);
00478     \} \textcolor{keywordflow}{while}(!done);
00479     printf(\textcolor{stringliteral}{"Testing motor %d.\(\backslash\)n"}, val);
00480     \textcolor{keywordflow}{return} val;
00481 \}
00482 
\hypertarget{lcddiag_8c_source.tex_l00490}{}\hyperlink{lcddiag_8c_a1f4f4ecd7b0c166456dd26a66e51f813}{00490} \textcolor{keywordtype}{int} \hyperlink{lcddiag_8c_a1f4f4ecd7b0c166456dd26a66e51f813}{selectSpd}(\textcolor{keywordtype}{int} mtr) \{
00491     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00492     \textcolor{keywordtype}{int} val=0;
00493     \textcolor{keywordflow}{do} \{
00494         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00495         \textcolor{comment}{/*bool leftPressed = lcdButtonPressed(LCD\_BTN\_LEFT);*/}
00496         \textcolor{comment}{/*bool rightPressed = lcdButtonPressed(LCD\_BTN\_RIGHT);*/}
00497 
00498         val = (float) ((\textcolor{keywordtype}{float}) analogRead(\hyperlink{autonrecorder_8h_a2490cda7a399f481333af2e5589b74a9}{AUTON\_POT})/(float) 
      \hyperlink{autonrecorder_8h_a01989d89b8bed150d0aacdaef5ccabd3}{AUTON\_POT\_HIGH}) * 254;
00499         val -= 127;
00500         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00501         \textcolor{keywordtype}{char} temp[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00502         memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00503         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00504         strcpy(motorstr, \textcolor{stringliteral}{"Motor: "});
00505         sprintf(temp, \textcolor{stringliteral}{"%d"}, mtr);
00506         strcat(motorstr, temp);
00507 
00508         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00509         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00510         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00511             strcat(str, \textcolor{stringliteral}{" "});
00512         \}
00513         strcat(str, motorstr);
00514         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00515             strcat(str, \textcolor{stringliteral}{" "});
00516         \}
00517 
00518         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00519 
00520         \textcolor{keywordtype}{char} speedstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00521         memset(speedstr, 0, \textcolor{keyword}{sizeof}(speedstr));
00522         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00523         strcpy(speedstr, \textcolor{stringliteral}{"Speed: "});
00524         sprintf(temp, \textcolor{stringliteral}{"%d"}, val);
00525         strcat(speedstr, temp);
00526 
00527         spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(speedstr))/2;
00528         strcpy(str, \textcolor{stringliteral}{""});
00529         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00530             strcat(str, \textcolor{stringliteral}{" "});
00531         \}
00532         strcat(str, speedstr);
00533         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00534             strcat(str, \textcolor{stringliteral}{" "});
00535         \}
00536 
00537         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, str);
00538 
00539         done = (digitalRead(\hyperlink{autonrecorder_8h_a5e5e9512ca0c5f741113ae51b24258c1}{AUTON\_BUTTON}) == \hyperlink{friendly_8h_a654adff3c664f27f0b29c24af818dd26}{PRESSED} || centerPressed);
00540         delay(20);
00541     \} \textcolor{keywordflow}{while}(!done);
00542     printf(\textcolor{stringliteral}{"Using speed: %d\(\backslash\)n"}, val);
00543     \textcolor{keywordflow}{return} val;
00544 \}
00545 
\hypertarget{lcddiag_8c_source.tex_l00555}{}\hyperlink{lcddiag_8c_ad4df85d8b386f9a60b097fd65cf27e3b}{00555} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_ad4df85d8b386f9a60b097fd65cf27e3b}{runIndivMotor}(FILE *lcdport)\{
00556     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00557     \textcolor{keywordtype}{int} mtr = \hyperlink{lcddiag_8c_ae7425e4ec1454bd0054bd4e1db7ea686}{selectMotor}(lcdport);
00558     \textcolor{keywordflow}{if}(mtr == 0) \textcolor{keywordflow}{return};
00559     \textcolor{keywordtype}{int} \hyperlink{opcontrol_8c_a642ce334330c8b0f6e33dd0a3fa65111}{spd} = \hyperlink{lcddiag_8c_a1f4f4ecd7b0c166456dd26a66e51f813}{selectSpd}(mtr);
00560     \textcolor{keywordtype}{int} val = \hyperlink{opcontrol_8c_a642ce334330c8b0f6e33dd0a3fa65111}{spd};
00561     \hyperlink{lcddiag_8c_a0f0b335cd078d025d6fb720eb3bf6437}{disableOpControl} = \textcolor{keyword}{true};
00562     motorStopAll();
00563     \textcolor{keywordflow}{do} \{
00564         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00565         \textcolor{keywordtype}{char} temp[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00566         memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00567         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00568         strcpy(motorstr, \textcolor{stringliteral}{"Motor: "});
00569         sprintf(temp, \textcolor{stringliteral}{"%d"}, mtr);
00570         strcat(motorstr, temp);
00571 
00572         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00573         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00574         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00575             strcat(str, \textcolor{stringliteral}{" "});
00576         \}
00577         strcat(str, motorstr);
00578         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00579             strcat(str, \textcolor{stringliteral}{" "});
00580         \}
00581 
00582         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00583 
00584         \textcolor{keywordtype}{char} speedstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00585         memset(speedstr, 0, \textcolor{keyword}{sizeof}(speedstr));
00586         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00587         strcpy(speedstr, \textcolor{stringliteral}{"Run Speed: "});
00588         sprintf(temp, \textcolor{stringliteral}{"%d"}, val);
00589         strcat(speedstr, temp);
00590 
00591         spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(speedstr))/2;
00592         strcpy(str, \textcolor{stringliteral}{""});
00593         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00594             strcat(str, \textcolor{stringliteral}{" "});
00595         \}
00596         strcat(str, speedstr);
00597         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00598             strcat(str, \textcolor{stringliteral}{" "});
00599         \}
00600 
00601         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, str);
00602 
00603         done = \hyperlink{lcddiag_8h_a0592813f995bfeeadb9bee923833ed35}{lcdAnyButtonPressed}();
00604         motorSet(mtr, val);
00605 
00606         delay(20);
00607     \} \textcolor{keywordflow}{while}(!done);
00608     \hyperlink{lcddiag_8c_a0f0b335cd078d025d6fb720eb3bf6437}{disableOpControl} = \textcolor{keyword}{false};
00609 \}
00610 
\hypertarget{lcddiag_8c_source.tex_l00618}{}\hyperlink{lcddiag_8c_a45205137e2aea6d387568cabe3072002}{00618} \textcolor{keywordtype}{int} \hyperlink{lcddiag_8c_a45205137e2aea6d387568cabe3072002}{selectMotorGroup}(FILE *lcdport)\{
00619     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00620     \textcolor{keywordtype}{int} val = 0;
00621     \textcolor{keywordflow}{do} \{
00622         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00623         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00624         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00625 
00626         \textcolor{keywordflow}{if}(rightPressed && val != \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}-1) val++;
00627         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(rightPressed && val == \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}-1) val = -1;
00628         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != -1) val--;
00629         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val == -1) val = \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}-1;
00630 
00631         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00632         \textcolor{keywordflow}{if}(val != -1)\{
00633             memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00634             strcpy(motorstr, groups[val].name);
00635         \} \textcolor{keywordflow}{else} \{
00636             strcpy(motorstr, \textcolor{stringliteral}{"Cancel"});
00637         \}
00638 
00639         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00640         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00641         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00642             strcat(str, \textcolor{stringliteral}{" "});
00643         \}
00644         strcat(str, motorstr);
00645         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00646             strcat(str, \textcolor{stringliteral}{" "});
00647         \}
00648 
00649         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00650 
00651         done = centerPressed;
00652         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     >"});
00653         delay(20);
00654     \} \textcolor{keywordflow}{while}(!done);
00655     \textcolor{keywordflow}{return} val;
00656 \}
00657 
\hypertarget{lcddiag_8c_source.tex_l00665}{}\hyperlink{lcddiag_8c_a7a421f9cf3e21c806080bee51c68a5c9}{00665} \textcolor{keywordtype}{int} \hyperlink{lcddiag_8c_a7a421f9cf3e21c806080bee51c68a5c9}{selectSpdGroup}(\textcolor{keywordtype}{int} mtr) \{
00666     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00667     \textcolor{keywordtype}{int} val;
00668     \textcolor{keywordflow}{do} \{
00669         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00670         \textcolor{comment}{/*bool leftPressed = lcdButtonPressed(LCD\_BTN\_LEFT);*/}
00671         \textcolor{comment}{/*bool rightPressed = lcdButtonPressed(LCD\_BTN\_RIGHT);*/}
00672 
00673         val = (float) ((\textcolor{keywordtype}{float}) analogRead(\hyperlink{autonrecorder_8h_a2490cda7a399f481333af2e5589b74a9}{AUTON\_POT})/(float) 
      \hyperlink{autonrecorder_8h_a01989d89b8bed150d0aacdaef5ccabd3}{AUTON\_POT\_HIGH}) * 254;
00674         val -= 127;
00675         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00676         \textcolor{keywordtype}{char} temp[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00677         memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00678         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00679         strcpy(motorstr, groups[mtr].name);
00680 
00681         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00682         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00683         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00684             strcat(str, \textcolor{stringliteral}{" "});
00685         \}
00686         strcat(str, motorstr);
00687         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00688             strcat(str, \textcolor{stringliteral}{" "});
00689         \}
00690 
00691         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00692 
00693         \textcolor{keywordtype}{char} speedstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00694         memset(speedstr, 0, \textcolor{keyword}{sizeof}(speedstr));
00695         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00696         strcpy(speedstr, \textcolor{stringliteral}{"Speed: "});
00697         sprintf(temp, \textcolor{stringliteral}{"%d"}, val);
00698         strcat(speedstr, temp);
00699 
00700         spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(speedstr))/2;
00701         strcpy(str, \textcolor{stringliteral}{""});
00702         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00703             strcat(str, \textcolor{stringliteral}{" "});
00704         \}
00705         strcat(str, speedstr);
00706         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00707             strcat(str, \textcolor{stringliteral}{" "});
00708         \}
00709 
00710         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, str);
00711 
00712         done = (digitalRead(\hyperlink{autonrecorder_8h_a5e5e9512ca0c5f741113ae51b24258c1}{AUTON\_BUTTON}) == \hyperlink{friendly_8h_a654adff3c664f27f0b29c24af818dd26}{PRESSED} || centerPressed);
00713         delay(20);
00714     \} \textcolor{keywordflow}{while}(!done);
00715     \textcolor{keywordflow}{return} val;
00716 \}
00717 
\hypertarget{lcddiag_8c_source.tex_l00727}{}\hyperlink{lcddiag_8c_a61bf99fda231c065d2113f0c67b8d72a}{00727} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a61bf99fda231c065d2113f0c67b8d72a}{runGroupMotor}(FILE *lcdport)\{
00728     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00729     \textcolor{keywordtype}{int} mtr = \hyperlink{lcddiag_8c_a45205137e2aea6d387568cabe3072002}{selectMotorGroup}(lcdport);
00730     \textcolor{keywordflow}{if}(mtr == -1) \textcolor{keywordflow}{return};
00731     \textcolor{keywordtype}{int} \hyperlink{opcontrol_8c_a642ce334330c8b0f6e33dd0a3fa65111}{spd} = \hyperlink{lcddiag_8c_a7a421f9cf3e21c806080bee51c68a5c9}{selectSpdGroup}(mtr);
00732     \textcolor{keywordtype}{int} val = \hyperlink{opcontrol_8c_a642ce334330c8b0f6e33dd0a3fa65111}{spd};
00733     \hyperlink{lcddiag_8c_a0f0b335cd078d025d6fb720eb3bf6437}{disableOpControl} = \textcolor{keyword}{true};
00734     motorStopAll();
00735     \textcolor{keywordflow}{do} \{
00736         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00737         \textcolor{keywordtype}{char} temp[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00738         memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00739         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00740         strcpy(motorstr, groups[mtr].name);
00741 
00742         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00743         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00744         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00745             strcat(str, \textcolor{stringliteral}{" "});
00746         \}
00747         strcat(str, motorstr);
00748         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00749             strcat(str, \textcolor{stringliteral}{" "});
00750         \}
00751 
00752         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00753 
00754         \textcolor{keywordtype}{char} speedstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00755         memset(speedstr, 0, \textcolor{keyword}{sizeof}(speedstr));
00756         memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00757         strcat(speedstr, \textcolor{stringliteral}{"Run Speed: "});
00758         sprintf(temp, \textcolor{stringliteral}{"%d"}, val);
00759         strcat(speedstr, temp);
00760 
00761         spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(speedstr))/2;
00762         strcpy(str, \textcolor{stringliteral}{""});
00763         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00764             strcat(str, \textcolor{stringliteral}{" "});
00765         \}
00766         strcat(str, speedstr);
00767         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00768             strcat(str, \textcolor{stringliteral}{" "});
00769         \}
00770 
00771         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, str);
00772 
00773         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 1; i <= 10; i++)\{
00774             \textcolor{keywordflow}{if}(groups[mtr].motor[i])\{
00775                 motorSet(i, val);
00776             \}
00777         \}
00778 
00779         done = \hyperlink{lcddiag_8h_a0592813f995bfeeadb9bee923833ed35}{lcdAnyButtonPressed}();
00780         delay(20);
00781     \} \textcolor{keywordflow}{while}(!done);
00782     \hyperlink{lcddiag_8c_a0f0b335cd078d025d6fb720eb3bf6437}{disableOpControl} = \textcolor{keyword}{false};
00783 \}
00784 
\hypertarget{lcddiag_8c_source.tex_l00791}{}\hyperlink{lcddiag_8c_a3391c1825bcf4987f3fad9f42a9c1f0d}{00791} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a3391c1825bcf4987f3fad9f42a9c1f0d}{runMotor}(FILE *lcdport)\{
00792     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00793     \textcolor{keywordtype}{int} val = 0;
00794     \textcolor{keywordflow}{do} \{
00795         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00796         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00797         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00798 
00799         \textcolor{keywordflow}{if}(rightPressed && val != 1) val++;
00800         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != 0) val--;
00801 
00802         \textcolor{keywordflow}{if}(val)\{
00803             lcdSetText(lcdport, 1, \textcolor{stringliteral}{"Indiv Motor Test"});
00804         \} \textcolor{keywordflow}{else} \{
00805             lcdSetText(lcdport, 1, \textcolor{stringliteral}{"Group Motor Test"});
00806         \}
00807         done = centerPressed;
00808         \textcolor{keywordflow}{if}(val == 0)\{
00809             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"|      SEL     >"});
00810         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == 1) \{
00811             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     |"});
00812         \}
00813         delay(20);
00814     \} \textcolor{keywordflow}{while}(!done);
00815     \textcolor{keywordflow}{if}(val)\{
00816         \hyperlink{lcddiag_8c_ad4df85d8b386f9a60b097fd65cf27e3b}{runIndivMotor}(lcdport);
00817     \} \textcolor{keywordflow}{else} \{
00818         \hyperlink{lcddiag_8c_a61bf99fda231c065d2113f0c67b8d72a}{runGroupMotor}(lcdport);
00819     \}
00820 \}
00821 
\hypertarget{lcddiag_8c_source.tex_l00829}{}\hyperlink{lcddiag_8c_a72f3f96c95c24f67103b2eb30995dccb}{00829} \textcolor{keywordtype}{bool}* \hyperlink{lcddiag_8c_a72f3f96c95c24f67103b2eb30995dccb}{selectMotorGroupMembers}(\textcolor{keywordtype}{bool} *motor)\{
00830     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00831     \textcolor{keywordtype}{int} val = 1;
00832     \textcolor{keywordflow}{do} \{
00833         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00834         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00835         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00836 
00837         \textcolor{keywordflow}{if}(rightPressed && val != 10) val++;
00838         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(rightPressed && val == 10) val = 0;
00839         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != 0) val--;
00840         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val == 0) val = 10;
00841 
00842         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00843         \textcolor{keywordflow}{if}(val != 0)\{
00844             \textcolor{keywordtype}{char} temp[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00845             memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00846             memset(temp, 0, \textcolor{keyword}{sizeof}(temp));
00847             strcpy(motorstr, \textcolor{stringliteral}{"Motor "});
00848             sprintf(temp, \textcolor{stringliteral}{"%d:"}, val);
00849             strcat(motorstr, temp);
00850             \textcolor{keywordflow}{if}(motor[val])\{
00851                 strcat(motorstr, \textcolor{stringliteral}{" On"});
00852             \} \textcolor{keywordflow}{else} \{
00853                 strcat(motorstr, \textcolor{stringliteral}{" Off"});
00854             \}
00855         \} \textcolor{keywordflow}{else} \{
00856             strcpy(motorstr, \textcolor{stringliteral}{"Confirm"});
00857         \}
00858         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00859         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00860         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00861             strcat(str, \textcolor{stringliteral}{" "});
00862         \}
00863         strcat(str, motorstr);
00864         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00865             strcat(str, \textcolor{stringliteral}{" "});
00866         \}
00867 
00868         lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, str);
00869 
00870         done = (centerPressed && val == 0);
00871         \textcolor{keywordflow}{if}(centerPressed && val != 0)\{
00872             motor[val] = !motor[val];
00873         \}
00874         \textcolor{keywordflow}{if}(val == 0)\{
00875             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"10     SEL     1"});
00876         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == 1) \{
00877             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"ESC    SEL     2"});
00878         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == 10) \{
00879             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"9      SEL   ESC"});
00880         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (val == 9) \{
00881             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"8      SEL    10"});
00882         \} \textcolor{keywordflow}{else} \{
00883             \textcolor{keywordtype}{char} navstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00884             memset(navstr, 0, \textcolor{keyword}{sizeof}(navstr));
00885             sprintf(navstr, \textcolor{stringliteral}{"%c      SEL     %c"},(val-1) + \textcolor{charliteral}{'0'}, (val+1) + \textcolor{charliteral}{'0'});
00886             \textcolor{comment}{/*navstr[0] = (val-1) + '0';*/}
00887             \textcolor{comment}{/*strcat(navstr, "      SEL     ");*/}
00888             \textcolor{comment}{/*navstr[LCD\_MESSAGE\_MAX\_LENGTH] = (val+1) + '0';*/}
00889             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, navstr);
00890         \}
00891         delay(20);
00892     \} \textcolor{keywordflow}{while}(!done);
00893     \textcolor{keywordflow}{return} motor;
00894 \}
00895 
\hypertarget{lcddiag_8c_source.tex_l00899}{}\hyperlink{lcddiag_8c_a9cffea5742f16bfef41b3dcf6d66cd7d}{00899} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a9cffea5742f16bfef41b3dcf6d66cd7d}{addMotorGroup}()\{
00900     \hyperlink{struct_motor_group}{MotorGroup} *temp = (\hyperlink{struct_motor_group}{MotorGroup}*) realloc(groups, \textcolor{keyword}{sizeof}(
      \hyperlink{struct_motor_group}{MotorGroup})*(\hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}+1));
00901     \textcolor{keywordflow}{if}(temp == NULL) \textcolor{keywordflow}{return};
00902     groups = temp;
00903     \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}++;
00904     memset(&groups[\hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}-1], 0, \textcolor{keyword}{sizeof}(groups[\hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}-1]));
00905     \hyperlink{lcddiag_8c_a17fe3ffc769a6d02c5226b3bfb79f28f}{typeString}(groups[\hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}-1].name);
00906     \hyperlink{lcddiag_8c_a72f3f96c95c24f67103b2eb30995dccb}{selectMotorGroupMembers}(groups[\hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups}-1].motor);
00907 \}
00908 
\hypertarget{lcddiag_8c_source.tex_l00915}{}\hyperlink{lcddiag_8c_a8e26ee136d643c9e069d89be0e6b019e}{00915} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a8e26ee136d643c9e069d89be0e6b019e}{editMotorGroup}(\textcolor{keywordtype}{int} mtr)\{
00916     \textcolor{keywordflow}{if}(mtr == -1) \textcolor{keywordflow}{return};
00917     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00918     \textcolor{keywordtype}{int} val = 0;
00919     FILE *lcdport = \hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT};
00920     \textcolor{keywordflow}{do} \{
00921         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00922         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00923         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00924 
00925         \textcolor{keywordflow}{if}(rightPressed && val != 1) val++;
00926         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != 0) val--;
00927 
00928         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00929         memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00930 
00931         \textcolor{keywordflow}{if}(val)\{
00932             strcpy(motorstr, \textcolor{stringliteral}{"Edit Name"});
00933         \} \textcolor{keywordflow}{else} \{
00934             strcpy(motorstr, \textcolor{stringliteral}{"Edit Motors"});
00935         \}
00936 
00937         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00938         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00939         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00940             strcat(str, \textcolor{stringliteral}{" "});
00941         \}
00942         strcat(str, motorstr);
00943         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00944             strcat(str, \textcolor{stringliteral}{" "});
00945         \}
00946 
00947         lcdSetText(lcdport, 1, str);
00948 
00949         done = centerPressed;
00950         \textcolor{keywordflow}{if}(val == 0)\{
00951             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"|      SEL     >"});
00952         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == 1) \{
00953             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     |"});
00954         \}
00955         delay(20);
00956     \} \textcolor{keywordflow}{while}(!done);
00957     \textcolor{keywordflow}{if}(val)\{
00958         \hyperlink{lcddiag_8c_a17fe3ffc769a6d02c5226b3bfb79f28f}{typeString}(groups[mtr].name);
00959     \} \textcolor{keywordflow}{else} \{
00960         \hyperlink{lcddiag_8c_a72f3f96c95c24f67103b2eb30995dccb}{selectMotorGroupMembers}(groups[mtr].motor);
00961     \}
00962 \}
00963 
\hypertarget{lcddiag_8c_source.tex_l00970}{}\hyperlink{lcddiag_8c_ac1782b34157c340fc8ae576a55d7d067}{00970} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_ac1782b34157c340fc8ae576a55d7d067}{delMotorGroup}(\textcolor{keywordtype}{int} mtr)\{
00971     \textcolor{keywordflow}{if}(mtr == -1) \textcolor{keywordflow}{return};
00972     \textcolor{keywordtype}{int} val = 0;
00973     FILE *lcdport = \hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT};
00974     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
00975     \textcolor{keywordflow}{do} \{
00976         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
00977         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
00978         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
00979 
00980         \textcolor{keywordflow}{if}(rightPressed && val != 1) val++;
00981         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != 0) val--;
00982 
00983         \textcolor{keywordtype}{char} motorstr[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
00984         memset(motorstr, 0, \textcolor{keyword}{sizeof}(motorstr));
00985 
00986         \textcolor{keywordflow}{if}(val)\{
00987             strcpy(motorstr, \textcolor{stringliteral}{"Delete Forever"});
00988         \} \textcolor{keywordflow}{else} \{
00989             strcpy(motorstr, \textcolor{stringliteral}{"Cancel Delete"});
00990         \}
00991 
00992         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(motorstr))/2;
00993         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
00994         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00995             strcat(str, \textcolor{stringliteral}{" "});
00996         \}
00997         strcat(str, motorstr);
00998         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
00999             strcat(str, \textcolor{stringliteral}{" "});
01000         \}
01001 
01002         lcdSetText(lcdport, 1, str);
01003 
01004         done = centerPressed;
01005         \textcolor{keywordflow}{if}(val == 0)\{
01006             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"|      SEL     >"});
01007         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(val == 1) \{
01008             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     |"});
01009         \}
01010         delay(20);
01011     \} \textcolor{keywordflow}{while}(!done);
01012     \textcolor{keywordflow}{if}(val)\{
01013         memset(&groups[mtr], 0, \textcolor{keyword}{sizeof}(groups[mtr]));
01014         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = mtr; i < \hyperlink{lcddiag_8c_a205f1cedec1664555276e0a71a1c87d8}{numgroups} - 1; i++)\{
01015             memcpy(&groups[i], &groups[i+1], \textcolor{keyword}{sizeof}(groups[i]));
01016         \}
01017         numgroups--;
01018     \}
01019 \}
01020 
\hypertarget{lcddiag_8c_source.tex_l01027}{}\hyperlink{lcddiag_8c_a9c8ce3f638a12bc9a264dd447be96a6d}{01027} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a9c8ce3f638a12bc9a264dd447be96a6d}{runMotorGroupMgmt}(FILE *lcdport)\{
01028     \textcolor{keywordtype}{bool} done = \textcolor{keyword}{false};
01029     \textcolor{keywordtype}{int} val = 0;
01030     \textcolor{keywordflow}{do} \{
01031         \textcolor{keywordtype}{bool} centerPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_CENTER);
01032         \textcolor{keywordtype}{bool} leftPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_LEFT);
01033         \textcolor{keywordtype}{bool} rightPressed = \hyperlink{lcddiag_8h_a74e4c744db49f9b7b645095575e152ad}{lcdButtonPressed}(LCD\_BTN\_RIGHT);
01034 
01035         \textcolor{keywordflow}{if}(rightPressed && val != 3) val++;
01036         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(rightPressed && val == 3) val = 0;
01037         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val != 0) val--;
01038         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(leftPressed && val == 0) val = 3;
01039 
01040         \textcolor{keywordflow}{switch}(val)\{
01041             \textcolor{keywordflow}{case} 0: lcdSetText(lcdport, 1, \textcolor{stringliteral}{"Add Motor Group"}); \textcolor{keywordflow}{break};
01042             \textcolor{keywordflow}{case} 1: lcdSetText(lcdport, 1, \textcolor{stringliteral}{"Edit Motor Group"}); \textcolor{keywordflow}{break};
01043             \textcolor{keywordflow}{case} 2: lcdSetText(lcdport, 1, \textcolor{stringliteral}{"Del Motor Group"}); \textcolor{keywordflow}{break};
01044             \textcolor{keywordflow}{case} 3: lcdSetText(lcdport, 1, \textcolor{stringliteral}{"Cancel Grp. Mgmt"}); \textcolor{keywordflow}{break};
01045         \}
01046         done = centerPressed;
01047         \textcolor{keywordflow}{if}(val == 0)\{
01048             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     >"});
01049         \} \textcolor{keywordflow}{else} \{
01050             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2, \textcolor{stringliteral}{"<      SEL     >"});
01051         \}
01052         delay(20);
01053     \} \textcolor{keywordflow}{while}(!done);
01054     \textcolor{keywordflow}{switch}(val)\{
01055         \textcolor{keywordflow}{case} 0: \hyperlink{lcddiag_8c_a9cffea5742f16bfef41b3dcf6d66cd7d}{addMotorGroup}(); \textcolor{keywordflow}{break};
01056         \textcolor{keywordflow}{case} 1: \hyperlink{lcddiag_8c_a8e26ee136d643c9e069d89be0e6b019e}{editMotorGroup}(\hyperlink{lcddiag_8c_a45205137e2aea6d387568cabe3072002}{selectMotorGroup}(lcdport)); \textcolor{keywordflow}{break};
01057         \textcolor{keywordflow}{case} 2: \hyperlink{lcddiag_8c_ac1782b34157c340fc8ae576a55d7d067}{delMotorGroup}(\hyperlink{lcddiag_8c_a45205137e2aea6d387568cabe3072002}{selectMotorGroup}(lcdport)); \textcolor{keywordflow}{break};
01058         \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{break};
01059     \}
01060 \}
01061 
\hypertarget{lcddiag_8c_source.tex_l01068}{}\hyperlink{lcddiag_8c_ae830c338f6de302a9719b9e7829d9897}{01068} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_ae830c338f6de302a9719b9e7829d9897}{runConnection}(FILE *lcdport)\{
01069     \textcolor{keywordflow}{do} \{
01070         \textcolor{keywordtype}{char} strjoy1[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01071         \textcolor{keywordtype}{char} strjoy2[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01072         \textcolor{keywordflow}{if}(isJoystickConnected(1))\{
01073             strcat(strjoy1, \textcolor{stringliteral}{"J1: Connected"});
01074         \} \textcolor{keywordflow}{else} \{
01075             strcat(strjoy1, \textcolor{stringliteral}{"J1: Disconnected"});
01076         \}
01077         \textcolor{keywordflow}{if}(isJoystickConnected(2))\{
01078             strcat(strjoy2, \textcolor{stringliteral}{"J2: Connected"});
01079         \} \textcolor{keywordflow}{else} \{
01080             strcat(strjoy2, \textcolor{stringliteral}{"J2: Disconnected"});
01081         \}
01082 
01083         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(strjoy1))/2;
01084         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01085         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01086             strcat(str, \textcolor{stringliteral}{" "});
01087         \}
01088         strcat(str, strjoy1);
01089         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01090             strcat(str, \textcolor{stringliteral}{" "});
01091         \}
01092 
01093         lcdSetText(lcdport, 1, str);
01094 
01095         spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(strjoy2))/2;
01096         strcpy(str, \textcolor{stringliteral}{""});
01097         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01098             strcat(str, \textcolor{stringliteral}{" "});
01099         \}
01100         strcat(str, strjoy2);
01101         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01102             strcat(str, \textcolor{stringliteral}{" "});
01103         \}
01104 
01105         lcdSetText(lcdport, 2, str);
01106 
01107         delay(20);
01108     \} \textcolor{keywordflow}{while}(!\hyperlink{lcddiag_8h_a0592813f995bfeeadb9bee923833ed35}{lcdAnyButtonPressed}());
01109 \}
01110 
\hypertarget{lcddiag_8c_source.tex_l01117}{}\hyperlink{lcddiag_8c_a7154650020a551de49d976659df81a9d}{01117} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a7154650020a551de49d976659df81a9d}{runRobot}(FILE *lcdport)\{
01118     \textcolor{keywordflow}{do} \{
01119         \textcolor{keywordtype}{char} strjoy1[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01120         \textcolor{keywordtype}{char} strjoy2[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01121         \textcolor{keywordflow}{if}(isOnline())\{
01122             strcat(strjoy1, \textcolor{stringliteral}{"Competition Mode"});
01123         \} \textcolor{keywordflow}{else} \{
01124             strcat(strjoy1, \textcolor{stringliteral}{"Practice Mode"});
01125         \}
01126         \textcolor{comment}{/*if(isEnabled())\{}
01127 \textcolor{comment}{            strcat(strjoy2, "Robot Enabled");}
01128 \textcolor{comment}{        \} else \{}
01129 \textcolor{comment}{            strcat(strjoy2, "Robot Disabled");}
01130 \textcolor{comment}{        \}*/}
01131         sprintf(strjoy2, \textcolor{stringliteral}{"Angle: %d"}, gyroGet(\hyperlink{sensors_8c_ad2d059cd4baeedd5fbead13085953eed}{gyro}));
01132 
01133         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(strjoy1))/2;
01134         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01135         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01136             strcat(str, \textcolor{stringliteral}{" "});
01137         \}
01138         strcat(str, strjoy1);
01139         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01140             strcat(str, \textcolor{stringliteral}{" "});
01141         \}
01142 
01143         lcdSetText(lcdport, 1, str);
01144 
01145         spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(strjoy2))/2;
01146         strcpy(str, \textcolor{stringliteral}{""});
01147         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01148             strcat(str, \textcolor{stringliteral}{" "});
01149         \}
01150         strcat(str, strjoy2);
01151         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01152             strcat(str, \textcolor{stringliteral}{" "});
01153         \}
01154 
01155         lcdSetText(lcdport, 2, str);
01156 
01157         delay(20);
01158     \} \textcolor{keywordflow}{while}(!\hyperlink{lcddiag_8h_a0592813f995bfeeadb9bee923833ed35}{lcdAnyButtonPressed}());
01159 \}
01160 
\hypertarget{lcddiag_8c_source.tex_l01168}{}\hyperlink{lcddiag_8c_a6ef180c90194ad9d2d4f6cde9a535fdb}{01168} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a6ef180c90194ad9d2d4f6cde9a535fdb}{runAuton}(FILE *lcdport)\{
01169     \textcolor{keywordflow}{do} \{
01170         \textcolor{keywordtype}{char} strjoy1[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01171         \textcolor{keywordtype}{char} strjoy2[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01172         \textcolor{keywordflow}{if}(\hyperlink{autonrecorder_8c_a4e72d907ee74449b71b5e20943f4217e}{autonLoaded} == -1)\{
01173             strcat(strjoy1, \textcolor{stringliteral}{"No Auton Loaded"});
01174         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{autonrecorder_8c_a4e72d907ee74449b71b5e20943f4217e}{autonLoaded} == 0)\{
01175             strcat(strjoy1, \textcolor{stringliteral}{"Empty Auton"});
01176         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{autonrecorder_8c_a4e72d907ee74449b71b5e20943f4217e}{autonLoaded} == \hyperlink{autonrecorder_8h_a5173a11a545cb4020fdd139552dc15c1}{MAX\_AUTON\_SLOTS} + 1)\{
01177             strcat(strjoy1, \textcolor{stringliteral}{"Prog. Skills"});
01178         \} \textcolor{keywordflow}{else} \{
01179             FILE* autonFile;
01180             \textcolor{keywordtype}{char} filename[\hyperlink{autonrecorder_8h_a9411d1482daa18dd8221c30db7fc6e4e}{AUTON\_FILENAME\_MAX\_LENGTH}];
01181             snprintf(filename, \textcolor{keyword}{sizeof}(filename)/\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), \textcolor{stringliteral}{"a%d"}, \hyperlink{autonrecorder_8c_a4e72d907ee74449b71b5e20943f4217e}{autonLoaded});
01182             autonFile = fopen(filename, \textcolor{stringliteral}{"r"});
01183             \textcolor{keywordtype}{char} name[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1];
01184             memset(name, 0, \textcolor{keyword}{sizeof}(name));
01185             fread(name, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), \textcolor{keyword}{sizeof}(name) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}), autonFile);
01186             strcpy(strjoy1, name);
01187             fclose(autonFile);
01188         \}
01189         \textcolor{keywordflow}{if}(isOnline())\{
01190             strcat(strjoy2, \textcolor{stringliteral}{"Recorder Off"});
01191         \} \textcolor{keywordflow}{else} \{
01192             strcat(strjoy2, \textcolor{stringliteral}{"Recorder On"});
01193         \}
01194 
01195         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(strjoy1))/2;
01196         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01197         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01198             strcat(str, \textcolor{stringliteral}{" "});
01199         \}
01200         strcat(str, strjoy1);
01201         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01202             strcat(str, \textcolor{stringliteral}{" "});
01203         \}
01204 
01205         lcdSetText(lcdport, 1, str);
01206 
01207         spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(strjoy2))/2;
01208         strcpy(str, \textcolor{stringliteral}{""});
01209         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01210             strcat(str, \textcolor{stringliteral}{" "});
01211         \}
01212         strcat(str, strjoy2);
01213         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01214             strcat(str, \textcolor{stringliteral}{" "});
01215         \}
01216 
01217         lcdSetText(lcdport, 2, str);
01218 
01219         delay(20);
01220     \} \textcolor{keywordflow}{while}(!\hyperlink{lcddiag_8h_a0592813f995bfeeadb9bee923833ed35}{lcdAnyButtonPressed}());
01221 \}
01222 
\hypertarget{lcddiag_8c_source.tex_l01233}{}\hyperlink{lcddiag_8c_a636890926de259e3f0869b8f4c4789c3}{01233} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a636890926de259e3f0869b8f4c4789c3}{runCredits}(FILE *lcdport)\{
01234     \textcolor{keywordflow}{do} \{
01235         \textcolor{keywordtype}{char} strjoy1[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01236         \textcolor{keywordtype}{char} strjoy2[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01237         strcat(strjoy1, \textcolor{stringliteral}{"Thanks Team 750W"});
01238         strcat(strjoy2, \textcolor{stringliteral}{"Akram Sandhu"});
01239 
01240         \textcolor{keywordtype}{int} spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(strjoy1))/2;
01241         \textcolor{keywordtype}{char} str[\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH}+1] = \textcolor{stringliteral}{""};
01242         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01243             strcat(str, \textcolor{stringliteral}{" "});
01244         \}
01245         strcat(str, strjoy1);
01246         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01247             strcat(str, \textcolor{stringliteral}{" "});
01248         \}
01249 
01250         lcdSetText(lcdport, 1, str);
01251 
01252         spaces = (\hyperlink{lcdmsg_8h_abe4c4b70fc6f44ae3680e5b2c68cdd00}{LCD\_MESSAGE\_MAX\_LENGTH} - strlen(strjoy2))/2;
01253         strcpy(str, \textcolor{stringliteral}{""});
01254         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01255             strcat(str, \textcolor{stringliteral}{" "});
01256         \}
01257         strcat(str, strjoy2);
01258         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < spaces; i++)\{
01259             strcat(str, \textcolor{stringliteral}{" "});
01260         \}
01261 
01262         lcdSetText(lcdport, 2, str);
01263 
01264         delay(20);
01265     \} \textcolor{keywordflow}{while}(!\hyperlink{lcddiag_8h_a0592813f995bfeeadb9bee923833ed35}{lcdAnyButtonPressed}());
01266 \}
01267 
\hypertarget{lcddiag_8c_source.tex_l01276}{}\hyperlink{lcddiag_8c_a668a59e2aa24df3a86222962ad9b4ad2}{01276} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_a668a59e2aa24df3a86222962ad9b4ad2}{doMenuChoice}(\textcolor{keywordtype}{int} choice)\{
01277     \textcolor{keywordflow}{switch}(choice)\{
01278         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_a9d4f4fbdfdddf2f8c7ab8d8c363059a9}{MENU\_SCREENSAVER}: \hyperlink{lcddiag_8c_a26920e40538bd7b86a0453f2629991d0}{runScreensaver}(
      \hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}); \textcolor{keywordflow}{break};
01279         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_afda057112a42ae99d3a7ebceb6f146d2}{MENU\_BATTERY}: \hyperlink{lcddiag_8c_a9a604d967527579e547780271290500f}{runBattery}(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}); \textcolor{keywordflow}{break};
01280         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_ae6fe324cd9273893eee9eb0d5769e4f0}{MENU\_MOTOR}: \hyperlink{lcddiag_8c_a3391c1825bcf4987f3fad9f42a9c1f0d}{runMotor}(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}); \textcolor{keywordflow}{break};
01281         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_a167e3569f77429ebc3565f22e6efeed5}{MENU\_MOTOR\_MGMT}: \hyperlink{lcddiag_8c_a9c8ce3f638a12bc9a264dd447be96a6d}{runMotorGroupMgmt}(
      \hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}); \textcolor{keywordflow}{break};
01282         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_a587cce72d772563eadcb99ecf9ea7501}{MENU\_CONNECTION}: \hyperlink{lcddiag_8c_ae830c338f6de302a9719b9e7829d9897}{runConnection}(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}); \textcolor{keywordflow}{break};
01283         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_a8cc6a725ad9992def546ea6adac06d23}{MENU\_ROBOT}: \hyperlink{lcddiag_8c_a7154650020a551de49d976659df81a9d}{runRobot}(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}); \textcolor{keywordflow}{break};
01284         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_a014f70d5953c92a6d1cd06b94c6dcbee}{MENU\_AUTON}: \hyperlink{lcddiag_8c_a6ef180c90194ad9d2d4f6cde9a535fdb}{runAuton}(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}); \textcolor{keywordflow}{break};
01285         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_a51157531331641e407b380e4345b4b65}{MENU\_BACKLIGHT}: lcdSetBacklight(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, !
      \hyperlink{lcddiag_8c_a8ba67e368b4d0422ad0c1fe6695040ac}{backlight}); \hyperlink{lcddiag_8c_a8ba67e368b4d0422ad0c1fe6695040ac}{backlight} = !\hyperlink{lcddiag_8c_a8ba67e368b4d0422ad0c1fe6695040ac}{backlight}; \textcolor{keywordflow}{break};
01286         \textcolor{keywordflow}{case} \hyperlink{lcddiag_8h_a887014df198bd0c4a6ae8610d000a1f3}{MENU\_CREDITS}: \hyperlink{lcddiag_8c_a636890926de259e3f0869b8f4c4789c3}{runCredits}(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}); \textcolor{keywordflow}{break};
01287     \}
01288 \}
01289 
\hypertarget{lcddiag_8c_source.tex_l01298}{}\hyperlink{lcddiag_8h_af7a16cd7a10c542f5bfe3e4ad292c34d}{01298} \textcolor{keywordtype}{void} \hyperlink{lcddiag_8c_af7a16cd7a10c542f5bfe3e4ad292c34d}{formatLCDDisplay}(\textcolor{keywordtype}{void} *ignore)\{
01299     lcdSetBacklight(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, \hyperlink{lcddiag_8c_a8ba67e368b4d0422ad0c1fe6695040ac}{backlight});
01300     \hyperlink{lcddiag_8c_a668a59e2aa24df3a86222962ad9b4ad2}{doMenuChoice}(\hyperlink{lcddiag_8h_a9d4f4fbdfdddf2f8c7ab8d8c363059a9}{MENU\_SCREENSAVER});
01301     \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{
01302         \hyperlink{lcddiag_8c_a668a59e2aa24df3a86222962ad9b4ad2}{doMenuChoice}(\hyperlink{lcddiag_8c_a1d2702d6508950416e4c927cc1ca18b3}{selectMenu}());
01303     \}
01304 \}
01305 
\end{DoxyCode}

\hypertarget{opcontrol_8c_source}{}\subsection{opcontrol.\+c}
\label{opcontrol_8c_source}\index{src/opcontrol.\+c@{src/opcontrol.\+c}}

\begin{DoxyCode}
00001 
00035 \textcolor{preprocessor}{#include "\hyperlink{main_8h}{main.h}"}
00036 
\hypertarget{opcontrol_8c_source.tex_l00040}{}\hyperlink{opcontrol_8h_a642ce334330c8b0f6e33dd0a3fa65111}{00040} \textcolor{keywordtype}{int} \hyperlink{opcontrol_8c_a642ce334330c8b0f6e33dd0a3fa65111}{spd};
00041 
\hypertarget{opcontrol_8c_source.tex_l00045}{}\hyperlink{opcontrol_8h_aaefa47f4fdf865c2358c22b542a993e4}{00045} \textcolor{keywordtype}{int} \hyperlink{opcontrol_8c_aaefa47f4fdf865c2358c22b542a993e4}{turn};
00046 
\hypertarget{opcontrol_8c_source.tex_l00050}{}\hyperlink{opcontrol_8h_ab9078d4ef28960b548a1621e2f6e9438}{00050} \textcolor{keywordtype}{int} \hyperlink{opcontrol_8c_ab9078d4ef28960b548a1621e2f6e9438}{sht}; 
00051 
\hypertarget{opcontrol_8c_source.tex_l00055}{}\hyperlink{opcontrol_8h_a0f71b6f71e93fa27c60c4dbbfc135bbb}{00055} \textcolor{keywordtype}{int} \hyperlink{opcontrol_8c_a0f71b6f71e93fa27c60c4dbbfc135bbb}{intk};
00056 
\hypertarget{opcontrol_8c_source.tex_l00060}{}\hyperlink{opcontrol_8h_a7039f0d5c4b6a662294b23dccf0bea0e}{00060} \textcolor{keywordtype}{int} \hyperlink{opcontrol_8c_a7039f0d5c4b6a662294b23dccf0bea0e}{trans};
00061 
\hypertarget{opcontrol_8c_source.tex_l00065}{}\hyperlink{opcontrol_8h_ada6c89c18e8b2a17151b9bc6b8ae060c}{00065} \textcolor{keywordtype}{int} \hyperlink{opcontrol_8c_ada6c89c18e8b2a17151b9bc6b8ae060c}{dep};
00066 
\hypertarget{opcontrol_8c_source.tex_l00073}{}\hyperlink{opcontrol_8c_a42af913b14d8bc475023395dac8ae30e}{00073} \textcolor{keywordtype}{void} \hyperlink{opcontrol_8c_a42af913b14d8bc475023395dac8ae30e}{targetNet}(\textcolor{keywordtype}{int} target)\{
00074     \textcolor{keywordtype}{int} error = gyroGet(\hyperlink{sensors_8c_ad2d059cd4baeedd5fbead13085953eed}{gyro}) % \hyperlink{constants_8h_af5a74308a3fd418c13af67f9319e5308}{ROTATION\_DEG} - target;
00075     \hyperlink{opcontrol_8c_aaefa47f4fdf865c2358c22b542a993e4}{turn} = error * 20;
00076 \}
00077 
\hypertarget{opcontrol_8c_source.tex_l00081}{}\hyperlink{opcontrol_8h_a7e408f7d4d3cf1d5a4f6c9f1bae6e770}{00081} \textcolor{keywordtype}{void} \hyperlink{opcontrol_8c_a7e408f7d4d3cf1d5a4f6c9f1bae6e770}{recordJoyInfo}()\{
00082     \hyperlink{opcontrol_8c_a642ce334330c8b0f6e33dd0a3fa65111}{spd} = joystickGetAnalog(1, 3);
00083     \hyperlink{opcontrol_8c_aaefa47f4fdf865c2358c22b542a993e4}{turn} = joystickGetAnalog(1, 1);
00084     \hyperlink{opcontrol_8c_ab9078d4ef28960b548a1621e2f6e9438}{sht} = 0;
00085     \hyperlink{opcontrol_8c_a0f71b6f71e93fa27c60c4dbbfc135bbb}{intk} = 0;
00086     \hyperlink{opcontrol_8c_a7039f0d5c4b6a662294b23dccf0bea0e}{trans} = 0;
00087     \textcolor{keywordflow}{if}(joystickGetDigital(1, 6, JOY\_UP) || joystickGetDigital(2, 6, JOY\_UP))\{
00088         \hyperlink{opcontrol_8c_ab9078d4ef28960b548a1621e2f6e9438}{sht} = 127;
00089     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(joystickGetDigital(1, 6, JOY\_DOWN) || joystickGetDigital(2, 6, JOY\_DOWN))\{
00090         \hyperlink{opcontrol_8c_ab9078d4ef28960b548a1621e2f6e9438}{sht} = -127;
00091     \} \textcolor{keywordflow}{else} \{
00092         \hyperlink{opcontrol_8c_ab9078d4ef28960b548a1621e2f6e9438}{sht} = 0;
00093     \}
00094     \textcolor{keywordflow}{if}(joystickGetDigital(1, 5, JOY\_UP) || joystickGetDigital(2, 5, JOY\_UP))\{
00095         \hyperlink{opcontrol_8c_a0f71b6f71e93fa27c60c4dbbfc135bbb}{intk} = 127;
00096     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(joystickGetDigital(1, 5, JOY\_DOWN) || joystickGetDigital(2, 5, JOY\_DOWN))\{
00097         \hyperlink{opcontrol_8c_a0f71b6f71e93fa27c60c4dbbfc135bbb}{intk} = -127;
00098     \} \textcolor{keywordflow}{else} \{
00099         \hyperlink{opcontrol_8c_a0f71b6f71e93fa27c60c4dbbfc135bbb}{intk} = 0;
00100     \}
00101     \textcolor{keywordflow}{if}(joystickGetDigital(1, 8, JOY\_LEFT))\{
00102         \hyperlink{opcontrol_8c_a7039f0d5c4b6a662294b23dccf0bea0e}{trans} = 80;
00103         \textcolor{comment}{/*changeGear(GEAR\_LIFT);*/}
00104     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(joystickGetDigital(1, 8, JOY\_RIGHT))\{
00105         \hyperlink{opcontrol_8c_a7039f0d5c4b6a662294b23dccf0bea0e}{trans} = -80;
00106         \textcolor{comment}{/*changeGear(GEAR\_DRIVE);*/}
00107     \} \textcolor{keywordflow}{else} \{
00108         \hyperlink{opcontrol_8c_a7039f0d5c4b6a662294b23dccf0bea0e}{trans} = 0;
00109     \}
00110     \textcolor{keywordflow}{if}(joystickGetDigital(1, 8, JOY\_UP) || joystickGetDigital(2, 8, JOY\_UP))\{
00111         \hyperlink{opcontrol_8c_ada6c89c18e8b2a17151b9bc6b8ae060c}{dep} = 127;
00112     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(joystickGetDigital(1, 8, JOY\_DOWN) || joystickGetDigital(2, 8, JOY\_DOWN))\{
00113         \hyperlink{opcontrol_8c_ada6c89c18e8b2a17151b9bc6b8ae060c}{dep} = -127;
00114     \} \textcolor{keywordflow}{else} \{
00115         \hyperlink{opcontrol_8c_ada6c89c18e8b2a17151b9bc6b8ae060c}{dep} = 0;
00116     \}
00117 
00118     \textcolor{keywordflow}{if}(joystickGetDigital(1, 7, JOY\_DOWN))\{
00119         \hyperlink{opcontrol_8c_a42af913b14d8bc475023395dac8ae30e}{targetNet}(\hyperlink{sensors_8h_a0bbc24e22c825c0cb35cc0a5a769d8f0}{GYRO\_NET\_TARGET});
00120     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(joystickGetDigital(1, 7, JOY\_UP))\{
00121         gyroReset(\hyperlink{sensors_8c_ad2d059cd4baeedd5fbead13085953eed}{gyro});
00122     \}
00123 \}
00124 
\hypertarget{opcontrol_8c_source.tex_l00128}{}\hyperlink{opcontrol_8h_ad3b45c5807c039d0ce28bb0da06f0014}{00128} \textcolor{keywordtype}{void} \hyperlink{opcontrol_8c_ad3b45c5807c039d0ce28bb0da06f0014}{moveRobot}()\{
00129     \hyperlink{motors_8h_ae918d6900bfd9ad920597db4f3ff138f}{move}(\hyperlink{opcontrol_8c_a642ce334330c8b0f6e33dd0a3fa65111}{spd}, \hyperlink{opcontrol_8c_aaefa47f4fdf865c2358c22b542a993e4}{turn});
00130     \hyperlink{motors_8h_ab183a9a4e6e469515b9f283f7156f843}{shoot}(\hyperlink{opcontrol_8c_ab9078d4ef28960b548a1621e2f6e9438}{sht});
00131     \hyperlink{motors_8h_ad29bed7d7fa6127b3ecf7e50eab23e9c}{intake}(\hyperlink{opcontrol_8c_a0f71b6f71e93fa27c60c4dbbfc135bbb}{intk});
00132     \hyperlink{motors_8h_aa1bbe2034fc14b835dd3d8c82f61135a}{transmission}(\hyperlink{opcontrol_8c_a7039f0d5c4b6a662294b23dccf0bea0e}{trans});
00133     \hyperlink{motors_8h_af9cae4c2a660189553e6c8e51e371913}{deploy}(\hyperlink{opcontrol_8c_ada6c89c18e8b2a17151b9bc6b8ae060c}{dep});
00134 \}
00135 
\hypertarget{opcontrol_8c_source.tex_l00153}{}\hyperlink{main_8h_ac71a94af413917f27d108e95c4d6f6a7}{00153} \textcolor{keywordtype}{void} \hyperlink{opcontrol_8c_ac71a94af413917f27d108e95c4d6f6a7}{operatorControl}() \{
00154     lcdSetBacklight(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, \textcolor{keyword}{true});
00155     \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{
00156         \textcolor{keywordflow}{if}(isOnline() || \hyperlink{autonrecorder_8c_aa2eda471576bdbaf33835a71da9bc616}{progSkills} == 0)\{
00157             \textcolor{keywordflow}{if}(\hyperlink{lcddiag_8c_a2a17fd7ddf1721b3a9d9b2a3d728c365}{lcdDiagTask} == NULL)\{
00158                 \hyperlink{lcddiag_8c_a2a17fd7ddf1721b3a9d9b2a3d728c365}{lcdDiagTask} = taskCreate(\hyperlink{lcddiag_8c_af7a16cd7a10c542f5bfe3e4ad292c34d}{formatLCDDisplay}, 
      TASK\_DEFAULT\_STACK\_SIZE, NULL, TASK\_PRIORITY\_DEFAULT);
00159             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(taskGetState(\hyperlink{lcddiag_8c_a2a17fd7ddf1721b3a9d9b2a3d728c365}{lcdDiagTask}) == TASK\_SUSPENDED)\{
00160                 taskResume(\hyperlink{lcddiag_8c_a2a17fd7ddf1721b3a9d9b2a3d728c365}{lcdDiagTask});
00161             \}
00162             \textcolor{keywordflow}{if}(!\hyperlink{lcddiag_8c_a0f0b335cd078d025d6fb720eb3bf6437}{disableOpControl})\{
00163                 \hyperlink{opcontrol_8c_a7e408f7d4d3cf1d5a4f6c9f1bae6e770}{recordJoyInfo}();
00164                 \textcolor{keywordflow}{if} (joystickGetDigital(1, 7, JOY\_RIGHT) && !isOnline()) \{
00165                     taskSuspend(\hyperlink{lcddiag_8c_a2a17fd7ddf1721b3a9d9b2a3d728c365}{lcdDiagTask});
00166                     \hyperlink{autonrecorder_8c_a1611f78b8c904848dcc98ae4b0b5b22b}{recordAuton}();
00167                     lcdSetBacklight(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, \textcolor{keyword}{true});
00168                     \hyperlink{autonrecorder_8c_ae6b758086a3b984c6705e12859eed2cc}{saveAuton}();
00169                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (joystickGetDigital(1, 7, JOY\_LEFT) && !isOnline()) \{
00170                     taskSuspend(\hyperlink{lcddiag_8c_a2a17fd7ddf1721b3a9d9b2a3d728c365}{lcdDiagTask});
00171                     lcdSetBacklight(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, \textcolor{keyword}{true});
00172                     \hyperlink{autonrecorder_8c_af6d130061f44459f9b3c629123e78f6e}{loadAuton}();
00173                     \hyperlink{autonrecorder_8c_ae592a73a6bd9b2adcaa58a8ee82daaa0}{playbackAuton}();
00174                 \}
00175                 \hyperlink{opcontrol_8c_ad3b45c5807c039d0ce28bb0da06f0014}{moveRobot}();
00176             \}
00177         \} \textcolor{keywordflow}{else} \{
00178             motorStopAll();
00179             lcdSetText(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 1, \textcolor{stringliteral}{"Press 7R"});
00180             lcdPrint(\hyperlink{lcdmsg_8h_abcf42bd88b3c36193f301ca25b033875}{LCD\_PORT}, 2,   \textcolor{stringliteral}{"Last Skills: %d"}, \hyperlink{autonrecorder_8c_aa2eda471576bdbaf33835a71da9bc616}{progSkills});
00181             \textcolor{keywordflow}{if} (joystickGetDigital(1, 7, JOY\_RIGHT) && !isOnline()) \{
00182                 \hyperlink{autonrecorder_8c_a1611f78b8c904848dcc98ae4b0b5b22b}{recordAuton}();
00183                 \hyperlink{autonrecorder_8c_ae6b758086a3b984c6705e12859eed2cc}{saveAuton}();
00184             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(joystickGetDigital(1, 7, JOY\_UP) && !isOnline()) \{
00185                 \hyperlink{autonrecorder_8c_aa2eda471576bdbaf33835a71da9bc616}{progSkills} = 0;
00186             \}
00187         \}
00188         delay(20);
00189     \}
00190 \}
\end{DoxyCode}
